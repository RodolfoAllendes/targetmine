
<project name="testmodel-webapp-test" default="default" basedir="."
  xmlns:imtestsproj="http://www.intermine.org/ns/im-tests-proj/1"
  xmlns:imdbproj="http://www.intermine.org/ns/im-db-proj/1">
  
  <description>build, test, package intermine-objectstore-test</description>
  
  <import file="../../../imbuild/tests.xml"/>
  <import file="../../../imbuild/db.xml"/>
  
  <target name="-init-test" depends="tests.-init-test">
    <copy file="${user.home}/${intermine.properties.file}"
          tofile="${build.test.resources.dir}/intermine.properties"/>
    <copy file="${default.intermine.properties.file}"
          tofile="${build.test.resources.dir}/default.intermine.properties"/>
    <!-- Build and init user-profile and unittest databases, we switch dependency building off
         because we will have just built all of the same dependencies -->
    <ant antfile="../../dbmodel/build.xml" target="insert-data-unittest" inheritAll="false">
      <property name="no.dep" value="true"/>
    </ant>
    <ant antfile="../main/build.xml" target="build-db-userprofile" inheritAll="false">
      <property name="no.dep" value="true"/>
    </ant>
  </target>
  
</project>

