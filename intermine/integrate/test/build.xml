
<project name="intermine-integrate-test" default="default" basedir="."
  xmlns:imtestsproj="http://www.intermine.org/ns/im-tests-proj/1"
  xmlns:task="http://www.intermine.org/ns/im-task-proj/1">
  
  <description>build, test, package intermine-integrate-test</description>
  
  <import file="../../../imbuild/tests.xml"/>
  <import file="../../../imbuild/task.xml"/>

  <target name="-pre-test" depends="build-db-fulldatatest"/>

  <target name="-copy-intermine-properties">
    <copy file="${user.home}/${intermine.properties.file}"
          tofile="${build.test.resources.dir}/intermine.properties"/>
    <copy file="${default.intermine.properties.file}"
          tofile="${build.test.resources.dir}/default.intermine.properties"/>
  </target>

  <target name="-init-test" depends="tests.-init-test, -copy-intermine-properties"/>
  
  <target name="-define-task-classpath">
    <!-- Override to alter the classpath created -->
    <path id="task.class.path">
      <pathelement location="${build.task.dir}"/>
      <pathelement location="${build.test.resources.dir}"/>
      <path refid="project.execute.path"/>
    </path>
  </target>
  
  <target name="build-db-fulldatatest" depends="init, -init-deps, -copy-intermine-properties, -init-task-xml">
    <task:build-db osname="os.fulldatatest"
                   dbname="db.fulldatatest"
                   model="fulldata"/>
  </target>
  
</project>

