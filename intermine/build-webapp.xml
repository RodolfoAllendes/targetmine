<project name="intermine-webapp" basedir=".">
  <description>InterMine WebApp build file</description>

  <target name="add-to-war-root"
          description="Add file(s) to the root directory">
    <war destfile="${war}" update="true">
      <fileset dir="${file.dir}">
        <patternset refid="file.names"/>
      </fileset>      
    </war>
  </target>
  
  <target name="add-to-war-webinf"
          description="Add file(s) to the WEB-INF directory">
    <war destfile="${war}" update="true">
      <webinf dir="${file.dir}">
        <patternset refid="file.names"/>
      </webinf>
    </war>
  </target>

   <target name="add-to-war-metainf"
          description="Add file(s) to the META-INF directory">
    <war destfile="${war}" update="true">
      <metainf dir="${file.dir}">
        <patternset refid="file.names"/>
      </metainf>
    </war>
  </target>  

  <target name="add-to-war-lib"
          description="Add file(s) to the WEB-INF/lib directory">
    <war destfile="${war}" update="true">
      <lib dir="${file.dir}">
        <patternset refid="file.names"/>
      </lib>
    </war>
  </target>

  <target name="add-to-war-classes"
          description="Add file(s) to the WEB-INF/classes directory">
    <war destfile="${war}" update="true">
      <classes dir="${file.dir}">
        <patternset refid="file.names"/>
      </classes>
    </war>
  </target>

  <target name="release-webapp"
          description="releases the InterMine web application to the server">
    <taskdef name="tomcat-deploy" classname="org.apache.catalina.ant.DeployTask">
      <classpath refid="class.path"/>
    </taskdef>
    <tomcat-deploy url="${webapp.deploy.url}/manager"
                   username="${webapp.manager}" 
                   password="${webapp.password}"
                   path="/${webapp.path}" 
                   war="file://${war}"/>
  </target>

  <target name="remove-webapp"
          description="remove the web application from the server">
    <taskdef name="tomcat-undeploy" classname="org.apache.catalina.ant.UndeployTask">
      <classpath refid="class.path"/>
    </taskdef>
    <tomcat-undeploy url="${webapp.deploy.url}/manager"
                     username="${webapp.manager}" 
                     password="${webapp.password}"
                     path="/${webapp.path}"/>
  </target>

  <target name="release-webservice"
          description="release the webservice to the server">
    <taskdef name="tomcat-deploy" classname="org.apache.catalina.ant.DeployTask">
      <classpath refid="class.path"/>
    </taskdef>
    <tomcat-deploy url="${webservice.baseurl}/manager" 
                   username="${webservice.manager}"
                   password="${webservice.password}"
                   path="${webservice.path}"
                   war="file://${war}"/>
  </target>

  <target name="remove-webservice"
          description="remove the webservice from the server">
    <taskdef name="tomcat-undeploy" classname="org.apache.catalina.ant.UndeployTask">
      <classpath refid="class.path"/>
    </taskdef>
    <tomcat-undeploy url="${webservice.baseurl}/manager"
                     username="${webservice.manager}"
                     password="${webservice.password}"
                     path="${webservice.path}"/>
  </target>
</project>
