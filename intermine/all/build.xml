
<project name="intermine-all" default="default" basedir=".">
  
  <description>wrapper project for build/testing/cleaning everything</description>

  <import file="../../imbuild/library.xml"/>
  
  <target name="-pre-init" depends="library.-pre-init">
    <property name="test.results.dir" location="${build.dir}/test/results"/>
  </target>
  
  <target name="-init-fulltest" depends="init">
    <mkdir dir="${test.results.dir}"/>
  </target>
  
  <target name="fulltest" depends="init, -init-fulltest, -do-fulltest, test-report"/>
  
  <target name="-do-fulltest">
    <subant inheritAll="false">
      <property name="test.results.dir" value="${test.results.dir}"/>
      <property name="generate.report" value="false"/>
      <fileset dir="../.." includes="intermine/objectstore/test/build.xml"/>
      <fileset dir="../.." includes="intermine/integrate/test/build.xml"/>
      <fileset dir="../.." includes="intermine/web/test/build.xml"/>
      <fileset dir="../.." includes="testmodel/webapp/test/build.xml"/>
    </subant>
    <ant antfile="../../flymine/build.xml" target="fulltest" inheritAll="false">
      <property name="results.junit" value="${test.results.dir}"/>
    </ant>
  </target>
  
  <target name="test-report" depends="init">
    <junitreport todir="${test.results.dir}">
      <fileset dir="${test.results.dir}">
        <include name="TEST-*.xml"/>
      </fileset>
      <report format="frames" todir="${test.results.dir}"/>
    </junitreport>
  </target>
  
  <target name="jar"/>
  
  <target name="compile" depends="init, -init-deps"/>
  
</project>

